<app-header></app-header>
<div class="checkout-container">

  <div class="checkout-content" *ngIf="!registroCompleto && valorPlanoSelecionado" >
    <div class="container-left">
      <div class="container-resumo">
        <button (click)="revisar()" class="btn-editar"><i class="fas fa-arrow-left"></i> Editar p√°gina</button>
        <h2>Resumo do Pedido</h2>
        <p>Revise a sua p√°gina antes do pagamento</p>
          <div class="resumo">
            <h4> <i class="fas fa-shopping-cart"></i> P√°gina LoveLink | Plano {{planoSelecionado}}</h4>
            <h4>R$ {{valorPlanoSelecionado}}0</h4>
          </div>
          <div class="total">
            <span>Total: </span>
           <div class="division-total">
            <div class="division-promocional">
                 <div class="promo-label">üè∑Ô∏è <b>40% OFF</b> - Dia dos Namorados</div>
                  <span class="preco-antigo">R$ {{valorAntigoPlanoSelecionado}}0</span>
            </div>
           
              <div class="valores">
                
                <span class="preco-atual">R$ {{valorPlanoSelecionado}}0</span>
              </div>
            </div>
           
          </div>
      </div>
      <h3>P√°gina Finalizada.</h3>
      <p style="margin-top: -8px;">Agora √© s√≥ realizar o pagamento para receber o link e QrCode de acesso √† sua nova p√°gina personalizada !</p>
      <p> <i class="fas fa-shield-alt" style="color: green"></i> Os pagamentos s√£o processados e protegidos com o Mercado Pago</p>

      <span style="color: red;">! Estamos passando por uma mudan√ßa na nossa plataforma de pagamento, e por isso hoje (03/06/2025) os pagamentos via PIX n√£o est√£o dispon√≠veis. Voc√™ ainda poder√° realizar o pagamento via Cart√£o, ou esperar at√© amanh√£ para gerar o qrcode pix. Agradecemos a compreens√£o</span>
    </div>
    
    <div class="container-pagamento">
      <h2>M√©todo de pagamento</h2>
      <p>Escolha a melhor forma de realizar o pagamento</p>

    <!-- PIX Option -->
      <div class="payment-option">
        <div class="option-header"  (click)="togglePix()">
          <span><i class="fas fa-qrcode"></i> Pix</span>
          <span [class.rotated]="pixOpen">‚ñº</span>
        </div>
       <div class="option-content" *ngIf="pixOpen">
          <form (ngSubmit)="gerarPix()" class="form-pix" #pixForm="ngForm" *ngIf="!qrCodeBase64">
            <h3>CPF</h3>
            <input type="text" [(ngModel)]="cpf" name="cpf" placeholder="Ex: 999.999.999-99" required />
            <h3>Nome</h3>
            <input type="text" [(ngModel)]="nome" name="nome" placeholder="Ex: Matheus Ribeiro" required />
            <button class="confirm-button" type="submit">Gerar QrCode <i class="fas fa-qrcode"></i></button>
           
          </form>
           <p style="color: rgb(124, 124, 124);"><i class="fas fa-lock"></i> Pagamento seguro com Mercado Pago</p>

          <div *ngIf="qrCodeBase64" class="container-pix-qrcode">
            <h4>Escaneie ou copie o c√≥digo e realize o pagamento com o aplicativo do seu banco</h4>
            <img [src]="'data:image/png;base64,' + qrCodeBase64" alt="QR Code PIX" />
            <p style="text-align: center; font-size: 9px"><strong></strong> {{ qrCode }}</p>
            <button class="btn-copiar" (click)="copiarCodigoPix()">Copiar</button>
            
          </div>
        </div>
      </div>

      <!-- Cart√£o Option -->
      <div class="payment-option" >
        <div class="option-header" (click)="toggleCartao()">
          <span><i class="far fa-credit-card"></i>   Cart√£o de Cr√©dito</span>
          <span [class.rotated]="cartaoOpen">‚ñº</span>
        </div>
        <div class="option-content" *ngIf="cartaoOpen">
          <div id="cardPaymentBrick_container"></div>
          <p style="color: rgb(124, 124, 124);"><i class="fas fa-lock"></i> Pagamento seguro com Mercado Pago</p>
        </div>
      </div>
      <div class="message">
        <p>Ao realizar o pagamento voc√™ concorda com a <a href="/privacidade">Pol√≠tica de privacidade</a> e os <a href="/termos">Termos de Uso</a></p>
      </div>
    </div>
  </div>
  <div class="confirmacao" *ngIf="pagamentoAprovado">
  <h2 *ngIf="!formData.idParceiro">Parab√©ns, {{primeiroNome}} ‚ù§Ô∏è</h2>
   <h2 *ngIf="formData.idParceiro">Parab√©ns, {{parceiro.nome}} ‚ù§Ô∏è</h2>
  <h3>Sua p√°gina est√° pronta e o seu pagamento foi aprovado com sucesso!</h3>
  <p>Voc√™ receber√° em seu email a confirma√ß√£o da compra junto com o link e QrCode de acesso da sua nova p√°gina personalizada!</p>
   <i class="fa fa-check-circle" style="color: #4CAF50; font-size: 80px;"></i>
    <p>Mais instru√ß√µes foram enviadas tamb√©m ao seu Email.</p>
  <!-- Exibir link personalizado + QR -->
</div>
  <div class="confirmacao" *ngIf="registroCompleto && !pagamentoAprovado">
    <h2 *ngIf="!formData.idParceiro">Pronto, {{primeiroNome}} ‚ù§Ô∏è</h2>
      <h2 *ngIf="formData.idParceiro">Pronto, {{parceiro.nome}} ‚ù§Ô∏è</h2>
    <h3>Sua p√°gina personalizada est√° pronta e o pagamento est√° em andamento.</h3>
    <p>Voc√™ poder√° acompanhar o status do seu pagamento atrav√©s do seu email e assim que for aprovado, receber√° o link e o QrCode de acesso para a sua p√°gina!</p>
    <i class="fas fa-hourglass-half" style="color: #ac9200; font-size: 80px;"></i>
    <p>Mais instru√ß√µes foram enviadas tamb√©m ao seu Email.</p>
  </div>
</div>

<div class="espaco" *ngIf="!pagamentoAprovado"></div>
<div class="espaco" *ngIf="!pagamentoAprovado"></div>
<div class="espaco" *ngIf="!pagamentoAprovado" ></div>
<div class="espaco" *ngIf="!pagamentoAprovado"></div>
<div class="espaco" *ngIf="!pagamentoAprovado"></div>
<div class="espaco" *ngIf="!pagamentoAprovado"></div>
<div class="espaco"></div>
<div class="espaco"></div>
<app-footer></app-footer>

 